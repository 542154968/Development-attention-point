# 0 - n 的随机数
```javascript
    Math.floor(Math.random() * (n + 1));
```
# Max - Min 的随机数
```javascript
// 一、min ≤ r ≤ max
function RandomNumBoth(Min,Max){
    var Range = Max - Min;
    var Rand = Math.random();
    var num = Min + Math.round(Rand * Range); //四舍五入
    return num;
}

// 二、min ≤ r < max
function RandomNum(Min, Max) {
    var Range = Max - Min;
    var Rand = Math.random();
    var num = Min + Math.floor(Rand * Range); //舍去
    return num;
}

// 三、min < r ≤ max
function RandomNum(Min, Max) {
    var Range = Max - Min;
    var Rand = Math.random();
    if(Math.round(Rand * Range)==0){       
        return Min + 1;
    }
    var num = Min + Math.round(Rand * Range);
    return num;
}

// 四、min < r < max 
function RandomNum(Min, Max) {
    var Range = Max - Min;
    var Rand = Math.random();
    if( Math.round(Rand * Range)==0 ){
        return Min + 1;
    } else if(Math.round(Rand * Max)==Max){
        index++;
        return Max - 1;
    }else{
        var num = Min + Math.round(Rand * Range) - 1;
        return num;
    }
 }
```

# 数组打乱排序
```javascript
function shuffle(array) {
    var _array = array.concat();
    for (var i = _array.length; i--; ) {
        // 产生 0 - i 的随机数
        var j = Math.floor(Math.random() * (i + 1));
        var temp = _array[i];
        _array[i] = _array[j];
        _array[j] = temp;
    }
    return _array;
}
```
# 深拷贝 - extend 的实现
```javascript
// 深拷贝有bug
var extend = (function() {
	var isObjFunc = function(name) {
			var toString = Object.prototype.toString
			return function() {
				return toString.call(arguments[0]) === '[object ' + name + ']'
			}
		}
	var isObject = isObjFunc('Object'),
		isArray = isObjFunc('Array'),
		isBoolean = isObjFunc('Boolean');
 	return function extend() {
			var index = 0,
				isDeep = false,
				obj, copy, destination, source, i
			if (isBoolean(arguments[0])) {
				index = 1;
				 isDeep = arguments[0]
			}
			for (i = arguments.length - 1; i > index; i--) {
				destination = arguments[i - 1]; source = arguments[i]
				if (isObject(source) || isArray(source)) {
					console.log(source);
					for (var property in source) {
						obj = source[property];
						if (isDeep && (isObject(obj) || isArray(obj))) {
							copy = isObject(obj) ? {} : [];
							var extended = extend(isDeep, copy, obj);
							 destination[property] = extended
						} else {
							destination[property] = source[property]
						}
					}
				} else {
					destination = source
				}
			}
			return destination
		}
})()


作者：文兴
链接：https://www.jianshu.com/p/04b1d88dabf2
來源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。


// 可以
void function(global){
    var extend,
        _extend,
        _isObject;

    _isObject = function(o){
        return Object.prototype.toString.call(o) === '[object Object]';
    }

    _extend = function self(destination, source) {
        var property;
        for (property in destination) {
            if (destination.hasOwnProperty(property)) {

                // 若destination[property]和sourc[property]都是对象，则递归
                if (_isObject(destination[property]) && _isObject(source[property])) {
                    self(destination[property], source[property]);
                };

                // 若sourc[property]已存在，则跳过
                if (source.hasOwnProperty(property)) {
                    continue;
                } else {
                    source[property] = destination[property];
                }
            }
        }
    }

    extend = function(){
        var arr = arguments,
            result = {},
            i;

        if (!arr.length) return {};

        for (i = arr.length - 1; i >= 0; i--) {
            if (_isObject(arr[i])) {
                _extend(arr[i], result);
            };
        }

        arr[0] = result;
        return result;
    }

    global.extend = extend;
}(window)
```

# 深拷贝
```javascript
function cloneObject (obj) {
    var newObj = {}
    //如果不是引用类型，直接返回
    if ( obj instanceof Object ) {
      return obj
    }
    //如果是引用类型，遍历属性
    else{
         for (var attr in obj) {
         //如果某个属性还是引用类型，递归调用
          newObj[attr] = cloneObject(obj[attr])
        }
    }
   
    return newObj
  }
```

# 浅拷贝
```javascript
var extend = function(destination,source) {
    for(var property in source) {
        destination[property] = source[property]
    }
    return destination
}
```

# 移动端遮罩穿透
```javascript
/**
  * ModalHelper helpers resolve the modal scrolling issue on mobile devices
  * https://github.com/twbs/bootstrap/issues/15852
  * requires document.scrollingElement polyfill https://github.com/yangg/scrolling-element
  */
var ModalHelper = (function(bodyCls) {
  var scrollTop;
  return {
    afterOpen: function() {
      scrollTop = document.scrollingElement.scrollTop;
      document.body.classList.add(bodyCls);
      document.body.style.top = -scrollTop + 'px';
    },
    beforeClose: function() {
      document.body.classList.remove(bodyCls);
      // scrollTop lost after set position:fixed, restore it back.
      document.scrollingElement.scrollTop = scrollTop;
    }
  };
})('modal-open');
```

# vue中解析template用到的一些正则方法
```javascript

const ncname = '[a-zA-Z_][\\w\\-\\.]*'; 
const singleAttrIdentifier = /([^\s"'<>/=]+)/ 
const singleAttrAssign = /(?:=)/ 
const singleAttrValues = [ /"([^"]*)"+/.source, /'([^']*)'+/.source, /([^\s"'=<>`]+)/.source ] 
const attribute = new RegExp( '^\\s*' + singleAttrIdentifier.source + '(?:\\s*(' + singleAttrAssign.source + ')' + '\\s*(?:' + singleAttrValues.join('|') + '))?' ) 
const qnameCapture = '((?:' + ncname + '\\:)?' + ncname + ')' 
const startTagOpen = new RegExp('^<' + qnameCapture) 
const startTagClose = /^\s*(\/?)>/ 
const endTag = new RegExp('^<\\/' + qnameCapture + '[^>]*>') 
const defaultTagRE = /\{\{((?:.|\n)+?)\}\}/g 
const forAliasRE = /(.*?)\s+(?:in|of)\s+(.*)/

https://juejin.im
掘金 — 一个帮助开发者成长的社区
```

# 获取某月最后一天
```javascript
new Date( 2018, 03, 0 ) // 序列化后的结果  "2018-03-31 00:00:00"
new Date( 2018, 02, 0 ) // 序列化后的结果  "2018-02-28 00:00:00"  自动计算是否是闰月
```

# 获取当前月的下个月的第一天
```javascript
new Date(2018, 03, 1) // 序列化后的结果  "2018-04-01 00:00:00"
```

# 获取当前月的第一天

> 有用吗？ 每个月不都一号么。。 

```javascript
new Date('2018/03/1') // 序列化后的结果  "2018-03-01 00:00:00"
```

# 循环一段数字N次
```javascript
function repeat( str, num ){
	return new Array( num + 1 ).join( str );
}

// 举个栗子
repeat( '123', 3 )
"123123123"

// 将数组的间隔转换成字符串  
```

# 零宽断言
```javascript
// 测试 谷歌支持 火狐IE不支持  2018-03-14 之后的版本就不清楚啦
'My name is: Jerry . My age is: 12 . : :666 .'.match(/(?<=:\s?)([^\s:]+)/g)

// 输出 (3) ["Jerry", "12", "666"]
```

# 数组去重 并统计每项有多少重复值
```javascript
// 数组去重并统计每一项有几个
var arr = ["a","b","c","c","ab","d","ab","d","c"],
	newArr = [],
	obj = {};
for ( var i = 0, l = arr.length; i < l; i++ ){
    if( newArr.indexOf( arr ) <= -1 ){
        newArr.push( arr );
        obj[arr] = 1
    }else {
        obj[arr] = obj[arr] + 1;
    }    
}
```

# 加减乘除避免失真
```javascript
var work = {
	
	/**
	 * 解决加法失真
	 * @param {Number} 两个数字
	 * work.accAdd(1.1, 2)
	 * */
	accAdd: function (arg1, arg2) {
		var r1, r2, m;
		try {
			r1 = arg1.toString().split(".")[1].length
		} catch (e) {
			r1 = 0
		}
		try {
			r2 = arg2.toString().split(".")[1].length
		} catch (e) {
			r2 = 0
		}
		m = Math.pow(10, Math.max(r1, r2));
		//console.log(m)
		return (arg1 * m + arg2 * m) / m;
	},
	/**
	 * 解决减法失真
	 * @param {Number} 两个数字
	 * work.accSub(1.1, 2)
	 * */
	accSub: function (arg1, arg2) {
		var r1, r2, m, n;
		try {
			r1 = arg1.toString().split(".")[1].length
		} catch (e) {
			r1 = 0
		}
		try {
			r2 = arg2.toString().split(".")[1].length
		} catch (e) {
			r2 = 0
		}
		m = Math.pow(10, Math.max(r1, r2));
		//last modify by deeka
		//动态控制精度长度
		n = (r1 >= r2) ? r1 : r2;
		return ((arg1 * m - arg2 * m) / m).toFixed(n);
	},
	/**
	 * 解决乘法失真
	 * @param {Number} 两个数字
	 * work.accMul(1.1, 2)
	 * */
	accMul: function (arg1, arg2) {
		var m = 0,
			s1 = arg1.toString(),
			s2 = arg2.toString();
		try {
			m += s1.split(".")[1].length
		} catch (e) {}
		try {
			m += s2.split(".")[1].length
		} catch (e) {}
		return Number(s1.replace(".", "")) * Number(s2.replace(".", "")) / Math.pow(10, m)
	},
	/**
	 * 解决除法失真
	 * @param {Number} 两个数字
	 * work.accDiv(1.1, 2)
	 * */
	accDiv: function (arg1, arg2) {
		var t1 = 0,
			t2 = 0,
			r1, r2;
		try {
			t1 = arg1.toString().split(".")[1].length
		} catch (e) {}
		try {
			t2 = arg2.toString().split(".")[1].length
		} catch (e) {}
		with(Math) {
			r1 = Number(arg1.toString().replace(".", ""));
			r2 = Number(arg2.toString().replace(".", ""));
			return (r1 / r2) * pow(10, t2 - t1);
		}
	}
}	
```

# 多层数据的查找
> [面试题：给你个id，去拿到name，多叉树遍历](https://segmentfault.com/a/1190000014381365)

```javascript
var cityData = [
      {
        id: 1,
        name: '广东省',
        children: [
          {
            id: 11,
            name: '深圳',
            children: [
              {
                id: 111,
                name: '宝安',
                children: [
                  {
                    id: 1111,
                    name: '西乡',
                    children:[
                      {
                        id: 11111,
                        name: '坪洲',
                        children:[]
                      },
                      {
                        id: 11112,
                        name: '灵芝',
                        children:[]
                      }
                    ]
                  },
                  {
                    id: 1112,
                    name: '南山',
                    children:[
                      {
                        id: 11121,
                        name: '科技园',
                        children:[]
                      }
                    ]
                  }
                ]
              },
              {
                id: 112,
                name: '福田',
                children: []
              }
            ]
          },
          {
            id: 12,
            name: '广州',
            children: [
              {
                id: 122,
                name: '白云区',
                children: [
                  {
                    id: 1222,
                    name: '白云区',
                    children: []
                  }
                ]
              },
              {
                id: 122,
                name: '珠海区',
                children: []
              }
            ]
          }
        ]
      },
      {
        id: 2,
        name: '湖南省',
        children: []
      }
    ];
```

**递归方法**
```javascript

let result = ''

// 递归实现
const recursion = (cityData, id) => {
  // cityData数据为空的时候直接返回
  if (!cityData || !cityData.length) return;
  // 常规循环cityData
  for (let i = 0, len = cityData.length; i < len; i++) {
    const childs = cityData[i].children;
    
    // 如果匹配到id的话，就是我们要的结果
    if (cityData[i].id === id) {
      result = cityData[i].name
    }
    // 如果还有子节点，执行递归
    if(childs && childs.length > 0){
      recursion(childs, id);
    }
  }
  return result
};

const r = recursion(cityData, 11112);
console.log(r) // 灵芝
```

**广度优先实现**
```javascript
let result = ''

const range = (cityData, id) => {
  if (!cityData || !cityData.length) return;
  // 定义一个数据栈
  let stack = [];

  let item = null;

  //先将第一层节点放入栈
  for (var i = 0, len = cityData.length; i < len; i++) {
    stack.push(cityData[i]);
  }

  while (stack.length) {
    // 将数据栈的第一个取出来
    item = stack.shift();
    // 如果符合就赋值给result
    if (item.id === id) {
      result = item.name
    }
    //如果该节点有子节点，继续添加进入栈底
    if (item.children && item.children.length) {
      stack = stack.concat(item.children);
    }
  }
  return result
};

let r1 = range(cityData, 11112);

console.log(r1) // 灵芝
```

**深度优先实现**
```javascript
let result = ''

const deep = (cityData, id) => {
  // 没有数据直接返回
  if (!cityData || !cityData.length) return;
  // 先定义一个数据栈
  let stack = []
  let item = null

  //先将第一层节点放入数据栈
  for (var i = 0, len = cityData.length; i < len; i++) {
    stack.push(cityData[i])
  }
  // 循环
  while (stack.length) {
    item = stack.shift()
    if (item.id === id) {
      result = item.name
    }
    //如果该节点有子节点，继续添加进入栈顶
    if (item.children && item.children.length) {
      // 注意这里调换了顺序
      stack = item.children.concat(stack);
    }
  }
  return result
};

let r3 = deep(cityData, 11112)
console.log(r3) // 灵芝
```

**正则方式实现**
```javascript

const regular = (cityData, id) => {
  // 没有数据直接返回
  if (!cityData || !cityData.length) return;
  // 数据转成字符串
  let cityStr = JSON.stringify(cityData)
  // 定义正则
  let reg = new RegExp(`"id":${id},"name":"([^\\x00-\\xff]+)",`)
  // 取到正则的子字符串并返回
  return (cityStr.match(reg))[1]
}

let r4 = regular(cityData, 11112);

console.log(r4) // 灵芝

```

** 图片canvas压缩 转blob对象 **
```javascript
utils = {
	// 压缩比率
    quality: 0.5,
    // 执行压缩图片
    photoCompress: function (file, w, objDiv){
        var ready = new FileReader();
        /*开始读取指定的Blob对象或File对象中的内容. 当读取操作完成时,readyState属性的值会成为DONE,如果设置了onloadend事件处理程序,则调用之.同时,result属性中将包含一个data: URL格式的字符串以表示所读取文件的内容.*/
        ready.readAsDataURL(file);
        ready.onload = function(){
            var re = this.result;
            utils.canvasDataURL(re, w, objDiv)
        }
    },
    // 压缩图片的详细
    canvasDataURL: function (path, obj, callback){
        var img = new Image();
        img.src = path;
        img.onload = function(){
            var that = this;
            // 默认按比例压缩
            var w = that.width,
                h = that.height,
                scale = w / h;
            w = obj.width || w;
            h = obj.height || (w / scale);
            var quality = 0.7;  // 默认图片质量为0.7
            //生成canvas
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            // 创建属性节点
            var anw = document.createAttribute("width");
            anw.nodeValue = w;
            var anh = document.createAttribute("height");
            anh.nodeValue = h;
            canvas.setAttributeNode(anw);
            canvas.setAttributeNode(anh);
            ctx.drawImage(that, 0, 0, w, h);
            // 图像质量
            if(obj.quality && obj.quality <= 1 && obj.quality > 0){
                quality = obj.quality;
            }
            // quality值越小，所绘制出的图像越模糊
            var base64 = canvas.toDataURL('image/jpeg', quality);
            // 回调函数返回base64的值
            callback(base64);
        }
    },
    /**
        * 将以base64的图片url数据转换为Blob
        * @param urlData
        *            用url方式表示的base64图片数据
        */
    convertBase64UrlToBlob: function (urlData){
        var arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1],
            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
        while(n--){
            u8arr[n] = bstr.charCodeAt(n);
        }
        return new Blob([u8arr], {type:mime});
    }
}
```

# 格式化日期
> 垃圾代码

```javascript
// 序列化日期
/**
 * @param 获取当前日期的时间戳返回对应日期 
 * @param {Number | String}
 * @param {Number} 1 => "2017-09-08 09:25:21"
 * @param {Number} 2 => "2017-09-08"
 * @prarm {String} year  获取当前年份 
 * @prarm {String} month  获取当前月份 
 * @prarm {String} day  获取当前几号 
 * */
export const formatDate =  (option) => {
  option = option || {};
  option.time = option.time || '/';
  option.type = option.type || "";
  // 为什么转成时间戳 因为ios - 的时间格式会报错
  option.time = Date.parse( option.time );
  if( isNaN( option.time ) ){
    return '/'
  };
  let date = new Date(option.time),
    year = date.getFullYear(),
    month = date.getMonth() + 1,
    day = date.getDate(),
    hour = date.getHours(),
    minute = date.getMinutes(),
    second = date.getSeconds();
  month < 10 ? month = '0' + month : month = month.toString();
  day < 10 ? day = '0' + day : day = day.toString();
  hour < 10 ? hour = '0' + hour : hour = hour.toString();
  minute < 10 ? minute = '0' + minute : minute = minute.toString();
  second < 10 ? second = '0' + second : second = second.toString();
  switch (option.type) {
    case 1:
      var time = year + "-" + month + "-" + day + " " + hour + ":" + minute + ":" + second;
      return time;
      break;
    case 2:
      return year + "-" + month + "-" + day;
      break;
    case 'year':
      return year
      break;
    case 'month':
      return month
      break;
    case 'day':
      return day
      break;
    default:
      return ''
      break;
  }
}
```

# echarts 半环形进度条
>  [例子地址](http://gallery.echartsjs.com/editor.html?c=xrJzQ35eVM) 复制上去配置项


```javascript
option = {
    tooltip: {
        formatter: "{a} <br/>{b} : {c}"
    },
    series: [{
        //类型
        type: 'gauge',
        //半径
        radius: 180,
        //起始角度。圆心 正右手侧为0度，正上方为90度，正左手侧为180度。
        startAngle: 180,
        //结束角度。
        endAngle: 0,
        center: ['50%', '50%'],
        //仪表盘轴线相关配置。
        axisLine: {
            show: true,
            // 属性lineStyle控制线条样式
            lineStyle: {
                width: 40,
                color: [
                    [0.6, '#3ebfff'],
                    [1, '#f5f5f5']
                ]
            }
        },
        //分隔线样式。
        splitLine: {
            show: false,
        },
        //刻度样式。
        axisTick: {
            show: false,
        },
        //刻度标签。
        axisLabel: {
            show: true,
            distance: -20,
            lineHeight: 100,
            color: '#000',
            formatter: function( params ){
                if( params == 0  ){
                    return '\n\n\n\v\v' + 0
                }else if( params == 100 ){
                    return '\n\n\n\v' + 100
                }else{
                    return ''
                }
            }
        },
        //仪表盘指针。
        pointer: {
            //这个show属性好像有问题，因为在这次开发中，需要去掉指正，我设置false的时候，还是显示指针，估计是BUG吧，我用的echarts-3.2.3；希望改进。最终，我把width属性设置为0，成功搞定！
            show: false,
            //指针长度
            length: '90%',
            width: 0,
        },
        //仪表盘标题。
        title: {
            show: true,
            offsetCenter: [0, '-25%'], // x, y，单位px
            textStyle: {
                color: '#000',
                fontSize: 12
            }
        },
        //仪表盘详情，用于显示数据。
        detail: {
            show: false,
            offsetCenter: [0, '-10%'],
            formatter: '{value}',
            textStyle: {
                fontSize: 12
            }
        },
        data: [{
            value: '',
            name: '60%',
        }]
    }]
};
```

# 数组去重
```javascript
Array.prototype.unique = function () {
  const newArray = [];
  let isRepeat;
  for (let i = 0; i < this.length; i++) {
    isRepeat = false;
    for (let j = 0; j < newArray.length; j++) {
      if (this[i] === newArray[j]) {
        isRepeat = true;
        break;
      }
    }
    if (!isRepeat) {
      newArray.push(this[i]);
    }
  }
  return newArray;
}

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```
```javascript
Array.prototype.unique = function () {
  const newArray = [];
  let isRepeat;
  for (let i = 0; i < this.length; i++) {
    isRepeat = false;
    for (let j = i + 1; j < this.length; j++) {
      if (this[i] === this[j]) {
        isRepeat = true;
        break;
      }
    }
    if (!isRepeat) {
      newArray.push(this[i]);
    }
  }
  return newArray;
}

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```
```javascript
Array.prototype.unique = function () {
  const newArray = [];
  
  for (let i = 0; i < this.length; i++) {
    for (let j = i + 1; j < this.length; j++) {
      if (this[i] === this[j]) {
        j = ++i;
      }
    }
    newArray.push(this[i]);
  }
  return newArray;
}

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```
- 10万个随机数的时间
```javascript
test1: 3688.440185546875ms
test2: 4641.60498046875ms
test3: 17684.365966796875ms
```
- indexOf
```javascript

// 利用Array.prototype.filter()过滤功能
// Array.prototype.indexOf()返回的是第一个索引值
// 只将数组中元素第一次出现的返回
// 之后出现的将被过滤掉

Array.prototype.unique = function () {
  return this.filter((item, index) => {
    return this.indexOf(item) === index;
  })
}

let arr = [1, 2, 3, 22, 233, 22, 2, 233, 'a', 3, 'b', 'a'];
Array.prototype.unique = function () {
  const newArray = [];
  this.forEach(item => {
    if (newArray.indexOf(item) === -1) {
      newArray.push(item);
    }
  });
  return newArray;
}

// 耗时
test1: 4887.201904296875ms
test2: 3766.324951171875ms

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

```
```javascript
Array.prototype.unique = function () {
  const newArray = [];
  this.sort();
  for (let i = 0; i < this.length; i++) {
    if (this[i] !== this[i + 1]) {
      newArray.push(this[i]);
    }
  }
  return newArray;
}

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

Array.prototype.unique = function () {
  const newArray = [];
  this.sort();
  for (let i = 0; i < this.length; i++) {
    if (this[i] !== newArray[newArray.length - 1]) {
      newArray.push(this[i]);
    }
  }
  return newArray;
}

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

test1: 121.6259765625ms
test2: 123.02197265625ms
```

```javascript
Array.prototype.unique = function () {
  const newArray = [];
  this.forEach(item => {
    if (!newArray.includes(item)) {
      newArray.push(item);
    }
  });
  return newArray;
}

test: 4123.377197265625ms

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

```
```javascript
Array.prototype.unique = function () {
  return this.sort().reduce((init, current) => {
    if(init.length === 0 || init[init.length - 1] !== current){
      init.push(current);
    }
    return init;
  }, []);
}
test: 180.401123046875ms

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```
```javascript
Array.prototype.unique = function () {
  const newArray = [];
  const tmp = new Map();
  for(let i = 0; i < this.length; i++){
        if(!tmp.get(this[i])){
            tmp.set(this[i], 1);
            newArray.push(this[i]);
        }
    }
    return newArray;
}

Array.prototype.unique = function () {
  const tmp = new Map();
  return this.filter(item => {
    return !tmp.has(item) && tmp.set(item, 1);
  })
}

// 综合考虑 map最优
test1: 27.89697265625ms
test2: 21.945068359375ms

作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
作者：棕小渐
链接：https://juejin.im/post/5b0284ac51882542ad774c45
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
```

# 全屏化某个DOM
```javascript
export default {
  data() {
    return {
      isFull: false
    };
  },
  mounted() {
    this.addListenWindow();
  },
  beforeDestroy() {
    this.removeListenWindow();
  },
  methods: {
    toggleFullScreen($el = document.querySelector("body")) {
      $el && this.fullScreen($el);
    },
    // 以下是全屏的逻辑
    fullScreen(el) {
      // 进入全屏  退出全屏
      if (window.navigator.userAgent.indexOf(".NET ") > -1) {
        if (
          window.outerHeight === window.screen.height &&
          window.outerWidth === window.screen.width
        ) {
          this.escFullScreen(el);
        } else {
          this.toFullScreen(el);
        }
      } else {
        !this.isFullScreen() ? this.toFullScreen(el) : this.escFullScreen(el);
      }
    },
    // 进入全屏
    toFullScreen(el) {
      (el.requestFullscreen && el.requestFullscreen()) ||
        (el.mozRequestFullScreen && el.mozRequestFullScreen()) ||
        (el.webkitRequestFullscreen && el.webkitRequestFullscreen()) ||
        (el.msRequestFullscreen && el.msRequestFullscreen());
      this.isFull = true;
    },
    // 退出全屏
    escFullScreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }
      this.isFull = false;
    },
    // 判断是否进入全屏
    isFullScreen() {
      // 火狐升级导致判断失效了 只用window去判断 谷歌 68版本以上也会有这个问题
      // window.fullScreen
      if (navigator.userAgent.indexOf("Firefox") >= 0) {
        return window.fullScreen;
      } else {
        return (
          window.fullScreen ||
          document.webkitIsFullScreen ||
          document.msFullscreenEnabled
        );
      }
    },
    // 获取chrome版本号
    getChromeVerson() {
      let userAgent = navigator.userAgent;
      let strStart = userAgent.indexOf("Chrome");
      let strStop = userAgent.indexOf(" Safari");
      let temp = userAgent.substring(strStart, strStop);
      let arr = temp.match(/\d+/);
      let version = arr[0] ? arr[0] : -1;
      return version;
    },
    addListenWindow() {
      // window.addEventListener("resize", this.toggleChange)
      document.addEventListener("fullscreenchange", this.toggleChange);
      document.addEventListener("webkitfullscreenchange", this.toggleChange);
      document.addEventListener("mozfullscreenchange", this.toggleChange);
      document.addEventListener("MSFullscreenChange", this.toggleChange);
    },
    removeListenWindow() {
      // window.removeEventListener("resize", this.toggleChange)
      document.removeEventListener("fullscreenchange", this.toggleChange);
      document.removeEventListener("webkitfullscreenchange", this.toggleChange);
      document.removeEventListener("mozfullscreenchange", this.toggleChange);
      document.removeEventListener("MSFullscreenChange", this.toggleChange);
    },
    toggleChange() {
      clearTimeout(this.reseizeTimeId);
      // 避免多次触发
      this.reseizeTimeId = setTimeout(() => {
        if (window.navigator.userAgent.indexOf(".NET ") > -1) {
          if (
            window.outerHeight === window.screen.height &&
            window.outerWidth === window.screen.width
          ) {
            this.isFull = true;
          } else {
            this.isFull = false;
          }
        } else {
          !this.isFullScreen() && (this.isFull = false);
        }
      }, 200);
    }
  }
};

```

# 格式化日期
```javascript
/*@param date 时间戳*/
/*@param format 时间格式*/
function dateFormat(date,format){
    if(!format || typeof format !== 'string'){
      console.error('format is undefiend or type is Error');
      return '';
    }

    date = date instanceof Date? date : (typeof date === 'number'|| typeof date === 'string')? new Date(date): new Date();

    //解析
    var formatReg = {
      'y+': date.getFullYear(),
      'M+': date.getMonth()+1,
      'd+': date.getDate(),
      'h+': date.getHours(),
      'm+': date.getMinutes(),
      's+': date.getSeconds()
    }
    for(var reg in formatReg){
      if(new RegExp(reg).test(format)){
            var match = RegExp.lastMatch;
            format = format.replace(match, formatReg[reg]< 10 ? '0'+formatReg[reg]: formatReg[reg].toString() );
      }
    }
    return format;
}

dateFormat(new Date().getTime(),'yyyy-MM-dd hh:mm:ss') 
dateFormat(new Date().getTime(),'MM-dd-yy hh:mm:ss') 
...
```

# 获取URL 域名 + 端口
```javascript
export const getBaseUrl = url => {
    var reg = /^((\w+):\/\/([^/:]*)(?::(\d+))?)(.*)/
    reg.exec(url)
    return RegExp.$1
}
```

# bytes转其他单位
```javascript
export const bytesToSize = bytes => {
    if (bytes === 0) return '0 B'
    let k = 1000 // or 1024
    let sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']
    let i = Math.floor(Math.log(bytes) / Math.log(k))
    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i]
}
```

# 数组打乱
```javascript
export const randomArr = arr => {
    function randomsort () {
        return Math.random() > 0.5 ? -1 : 1
        // 用Math.random()函数生成0~1之间的随机数与0.5比较，返回-1或1
    }
    let newArr = arr.sort(randomsort)
    return newArr
}
```

# trigger 实现
```javascript
export const trigger = (el, event) => {
    if (document.all) {
        el.event()
    } else {
        const evt = document.createEvent('Events') // 还有onchange则是HtmlEvents
        evt.initEvent(event, true, true)
        el.dispatchEvent(evt)
    }
}
```

# 下载传入的文件流
```javascript
/**
 * 下载传入的文件流
 * @param { Blob } blob 文件流
 * @param { String } file_name 生成的文件名称 例如 xxx.jpg xxx.txt
 */
export const download_blob = (blob, file_name) => {
    return new Promise((resolve, reject) => {
        try {
            const BLOB = new Blob([blob])
            if ('download' in document.createElement('a')) {
                // 非IE下载
                const elink = document.createElement('a')
                elink.download = file_name
                elink.style.display = 'none'
                elink.href = URL.createObjectURL(BLOB)
                document.body.appendChild(elink)
                elink.click()
                // trigger 不触发下载 trigger( elink, 'click' )
                // 删除引用 释放URL 对象
                URL.revokeObjectURL(elink.href)
                document.body.removeChild(elink)
                // IE10+下载
            } else {
                navigator.msSaveBlob(BLOB, file_name)
            }
            resolve({
                status: 'success',
                content: ''
            })
        } catch (error) {
            reject(error)
        }
    })
}
```

# dataURLtoBlob
```javascript
export const dataURLtoBlob = dataurl => {
    let arr = dataurl.split(',')
    let mime = arr[0].match(/:(.*?);/)[1]
    let bstr = atob(arr[1])
    let n = bstr.length
    let u8arr = new Uint8Array(n)
    while (n--) {
        u8arr[n] = bstr.charCodeAt(n)
    }
    return new Blob([u8arr], { type: mime })
}
```

# 时间戳转多少时间
```javascript
/**
 * 时间戳转多少时间
 * @param {Date} 日期时间戳
 */
export const time2Long = date => {
    // 传入时间戳
    if (isNaN(date)) {
        return '/'
    }
    // 1 - 1000 毫秒
    if (date >= 1 && date < 1000) {
        return `${date} 毫秒`
        // 1-59s  1000 - 59999
    } else if (date >= 1000 && date < 60000) {
        return `${Math.round(date / 1000)} 秒`
        // 1-59.99分 1*60s*1000  59.99*60*1000 3599400  3600000
    } else if (date >= 60000 && date < 3600000) {
        return `${Math.round(date / 60000)} 分钟`
        // 24小时 一小时3600000毫秒 86400000
    } else if (date >= 3600000 && date < 86400000) {
        return `${Math.round(date / 3600000)} 小时`
    } else if (date >= 86400000) {
        return `${Math.round(date / 86400000)} 天`
    }
}
```

# 数组上移下移
```javascript
{
	moveTop(index) {
      const cur = this.tableData.rows[index];
      cur && this.swapItems(index, index - 1);
    },
    moveBottom(index) {
      const cur = this.tableData.rows[index];
      cur && this.swapItems(index, index + 1);
    },
    swapItems(index1, index2) {
      this.tableData.rows[index1] = this.tableData.rows.splice(
        index2,
        1,
        this.tableData.rows[index1]
      )[0];
    },
}
```

# 数组分组
```javascript
// 比如三个一组
for (let i = 0; i < length; i += 3) {
          newArr.push(arr.slice(i, i + 3));
        }
```

# 百度地图和浏览器定位的封装 
```javascript
// 百度地图右键点击事件是 `rightclick`
import BMap from "BMap";

export default {
  methods: {
    // 将获取的位置解析为百度API
    translatePoint(x, y) {
      return new Promise((resolve, reject) => {
        const point = new BMap.Point(x, y);
        const convertor = new BMap.Convertor();
        let pointArr = [];
        pointArr.push(point);
        convertor.translate(pointArr, 1, 5, data => {
          if (data.status === 0) {
            resolve(data);
          } else {
            reject(new Error("坐标转换失败"));
          }
        });
      });
    },
    // 封装获取位置API方法
    promiseGeo() {
      return new Promise((resolve, reject) => {
        window.navigator.geolocation.getCurrentPosition(
          data => {
            data.coords && resolve(data);
          },
          err => {
            reject(err);
          },
          { timeout: 2000 }
        );
      });
    },
    // 坐标解析成地址
    position2Address(position) {
      return new Promise((resolve, reject) => {
        const myGeo = new BMap.Geocoder();
        myGeo.getLocation(position, rs => {
          var addComp = rs.addressComponents;
          if (addComp) {
            resolve(addComp.province);
          } else {
            reject(new Error());
          }
        });
      });
    },
    // 地址解析成坐标
    address2Position(address) {
      return new Promise((resolve, reject) => {
        const myGeo = new BMap.Geocoder();
        myGeo.getPoint(address, point => {
          point ? resolve(point) : reject(new Error("您的位置没有解析到结果"));
        });
      });
    },
    // 根据用户信息所在的省份设置默认展示的省份
    setPositionByAddress(address) {
      this.address2Position(address).then(data => {
        this.map.setCenter(data);
      });
    },
    createContextMenu(menuArr = []) {
      const menu = new BMap.ContextMenu();
      menuArr.forEach(v => {
        menu.addItem(new BMap.MenuItem(v.name, v.callback, 100));
      });
      this.map.addContextMenu(menu);
    }
  }
};

```

# 百度地图画块逻辑
```javascript
{
	/**
     *
     * 添加地块的逻辑
     */
    // 弹窗点击确认后 获取弹窗中的数据
    getPolygonData(data) {
      this.mapStatus = "edit";
      this.curPointArr = [];
      // 先实例化一个区域范围
      this.createPolygon(data);
      // 监听地图点击事件 给这个范围加点 圈选开始 开始编辑  添加这些点
      this.map.addEventListener("click", this.updatePolygonPoint);
    },
    //
    updatePolygonPoint(event) {
      // 如果点的是拖动的点 不加
      if (event.domEvent.target.className === "BMap_vectex BMap_vectex_node") {
        return;
      }
      this.curPointArr = this.curPolygon.getPath();
      // 每次点击改变这个实例化的
      this.curPointArr.push(event.point);
      this.curPolygon.setPath(this.getPolygonPath());
      this.curPolygon.enableEditing();
    },
    // 创建点
    createPolygon(data) {
      const polygon = new BMap.Polygon(this.getPolygonPath(), {
        strokeColor: data.color,
        strokeWeight: 1,
        strokeOpacity: 1,
        fillColor: data.color,
        fillOpacity: 0.4
      });
      polygon.htData = data;
      this.map.addOverlay(polygon);
      polygon.enableEditing();
      this.addPolygonEvent(polygon);
      this.curPolygon = polygon;
    },
    // 将点解析为可以画圈的点
    getPolygonPath() {
      return this.curPointArr.map(v => {
        const { lng, lat } = v;
        return new BMap.Point(lng, lat);
      });
    }
}
```

# 省市对应坐标
```javascript
export default {
  北京市: [116.4551, 40.2539],
  天津市: [117.4219, 39.4189],
  河北省: [114.4995, 38.1006],
  山西省: [112.3352, 37.9413],
  内蒙古自治区: [111.4124, 40.4901],
  辽宁省: [123.1238, 42.1216],
  吉林省: [125.8154, 44.2584],
  黑龙江省: [127.9688, 45.368],
  上海市: [121.4648, 31.2891],
  江苏省: [118.8062, 31.9208],
  浙江省: [119.5313, 29.8773],
  安徽省: [117.29, 32.0581],
  福建省: [119.4543, 25.9222],
  江西省: [116.0046, 28.6633],
  山东省: [117.1582, 36.8701],
  河南省: [113.4668, 34.6234],
  湖北省: [114.3896, 30.6628],
  湖南省: [113.0823, 28.2568],
  广东省: [113.5107, 23.2196],
  广西壮族自治区: [108.479, 23.1152],
  海南省: [110.3893, 19.8516],
  重庆市: [107.7539, 30.1904],
  四川省: [103.9526, 30.7617],
  贵州省: [106.6992, 26.7682],
  云南省: [102.9199, 25.4663],
  西藏自治区: [91.1865, 30.1465],
  陕西省: [109.1162, 34.2004],
  甘肃省: [103.5901, 36.3043],
  青海省: [101.4038, 36.8207],
  宁夏回族自治区: [106.3586, 38.1775],
  新疆维吾尔自治区: [87.9236, 43.5883],
  台湾: [121.6, 24.9],
  澳门: [22.1, 113.33],
  香港: [114.15, 22.15],

  北京: [116.4551, 40.2539],
  天津: [117.4219, 39.4189],
  河北: [114.4995, 38.1006],
  山西: [112.3352, 37.9413],
  内蒙古: [111.4124, 40.4901],
  辽宁: [123.1238, 42.1216],
  吉林: [125.8154, 44.2584],
  黑龙江: [127.9688, 45.368],
  上海: [121.4648, 31.2891],
  江苏: [118.8062, 31.9208],
  浙江: [119.5313, 29.8773],
  安徽: [117.29, 32.0581],
  福建: [119.4543, 25.9222],
  江西: [116.0046, 28.6633],
  山东: [117.1582, 36.8701],
  河南: [113.4668, 34.6234],
  湖北: [114.3896, 30.6628],
  湖南: [113.0823, 28.2568],
  广东: [113.5107, 23.2196],
  广西: [108.479, 23.1152],
  海南: [110.3893, 19.8516],
  重庆: [107.7539, 30.1904],
  四川: [103.9526, 30.7617],
  贵州: [106.6992, 26.7682],
  云南: [102.9199, 25.4663],
  西藏: [91.1865, 30.1465],
  陕西: [109.1162, 34.2004],
  甘肃: [103.5901, 36.3043],
  青海: [101.4038, 36.8207],
  宁夏: [106.3586, 38.1775],
  新疆: [87.9236, 43.5883],

  合肥: [117.29, 32.0581],
  东莞: [113.8953, 22.901],
  东营: [118.7073, 37.5513],
  中山: [113.4229, 22.478],
  临汾: [111.4783, 36.1615],
  临沂: [118.3118, 35.2936],
  丹东: [124.541, 40.4242],
  丽水: [119.5642, 28.1854],
  乌鲁木齐: [87.9236, 43.5883],
  佛山: [112.8955, 23.1097],
  保定: [115.0488, 39.0948],
  兰州: [103.5901, 36.3043],
  包头: [110.3467, 41.4899],
  北海: [109.314, 21.6211],
  南京: [118.8062, 31.9208],
  南宁: [108.479, 23.1152],
  南昌: [116.0046, 28.6633],
  南通: [121.1023, 32.1625],
  厦门: [118.1689, 24.6478],
  台州: [121.1353, 28.6688],

  呼和浩特: [111.4124, 40.4901],
  咸阳: [108.4131, 34.8706],
  哈尔滨: [127.9688, 45.368],
  唐山: [118.4766, 39.6826],
  嘉兴: [120.9155, 30.6354],
  大同: [113.7854, 39.8035],
  大连: [122.2229, 39.4409],
  太原: [112.3352, 37.9413],
  威海: [121.9482, 37.1393],
  宁波: [121.5967, 29.6466],
  宝鸡: [107.1826, 34.3433],
  宿迁: [118.5535, 33.7775],
  常州: [119.4543, 31.5582],
  广州: [113.5107, 23.2196],
  廊坊: [116.521, 39.0509],
  延安: [109.1052, 36.4252],
  张家口: [115.1477, 40.8527],
  徐州: [117.5208, 34.3268],
  德州: [116.6858, 37.2107],
  惠州: [114.6204, 23.1647],
  成都: [103.9526, 30.7617],
  扬州: [119.4653, 32.8162],
  承德: [117.5757, 41.4075],
  拉萨: [91.1865, 30.1465],
  无锡: [120.3442, 31.5527],
  日照: [119.2786, 35.5023],
  昆明: [102.9199, 25.4663],
  杭州: [119.5313, 29.8773],
  枣庄: [117.323, 34.8926],
  柳州: [109.3799, 24.9774],
  株洲: [113.5327, 27.0319],
  武汉: [114.3896, 30.6628],
  汕头: [117.1692, 23.3405],
  江门: [112.6318, 22.1484],
  沈阳: [123.1238, 42.1216],
  沧州: [116.8286, 38.2104],
  河源: [114.917, 23.9722],
  泉州: [118.3228, 25.1147],
  泰安: [117.0264, 36.0516],
  泰州: [120.0586, 32.5525],
  济南: [117.1582, 36.8701],
  济宁: [116.8286, 35.3375],
  海口: [110.3893, 19.8516],
  淄博: [118.0371, 36.6064],
  淮安: [118.927, 33.4039],
  深圳: [114.5435, 22.5439],
  清远: [112.9175, 24.3292],
  温州: [120.498, 27.8119],
  渭南: [109.7864, 35.0299],
  湖州: [119.8608, 30.7782],
  湘潭: [112.5439, 27.7075],
  滨州: [117.8174, 37.4963],
  潍坊: [119.0918, 36.524],
  烟台: [120.7397, 37.5128],
  玉溪: [101.9312, 23.8898],
  珠海: [113.7305, 22.1155],
  盐城: [120.2234, 33.5577],
  盘锦: [121.9482, 41.0449],
  石家庄: [114.4995, 38.1006],
  福州: [119.4543, 25.9222],
  秦皇岛: [119.2126, 40.0232],
  绍兴: [120.564, 29.7565],
  聊城: [115.9167, 36.4032],
  肇庆: [112.1265, 23.5822],
  舟山: [122.2559, 30.2234],
  苏州: [120.6519, 31.3989],
  莱芜: [117.6526, 36.2714],
  菏泽: [115.6201, 35.2057],
  营口: [122.4316, 40.4297],
  葫芦岛: [120.1575, 40.578],
  衡水: [115.8838, 37.7161],
  衢州: [118.6853, 28.8666],
  西宁: [101.4038, 36.8207],
  西安: [109.1162, 34.2004],
  贵阳: [106.6992, 26.7682],
  连云港: [119.1248, 34.552],
  邢台: [114.8071, 37.2821],
  邯郸: [114.4775, 36.535],
  郑州: [113.4668, 34.6234],
  鄂尔多斯: [108.9734, 39.2487],

  金华: [120.0037, 29.1028],
  铜川: [109.0393, 35.1947],
  银川: [106.3586, 38.1775],
  镇江: [119.4763, 31.9702],
  长春: [125.8154, 44.2584],
  长沙: [113.0823, 28.2568],
  长治: [112.8625, 36.4746],
  阳泉: [113.4778, 38.0951],
  青岛: [120.4651, 36.3373],
  韶关: [113.7964, 24.7028]
};

```

# 驼峰转下划线
```javascript
const hyphenateRE = /\B([A-Z])/g
 const hyphenate = str=> {
  return str.replace(hyphenateRE, '-$1').toLowerCase()
}
```
